<!DOCTYPE html>
<html lang="en"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="main_layout.html">
  <div layout:fragment="content">
      <div class="row">
          <div class="col-6 mx-auto">
              <h1>ADD POST PAGE</h1>
          </div>
      </div>
    <div class="container">
      <div class="col-6 mx-auto">
          <div class="row">
            <div class="col-12">
              <label>TITLE : </label>
            </div>
          </div>
          <div class="row mt-2">
            <div class="col-12">
              <input type="text" class="form-control" id="postTitle" placeholder="Title : ">
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-12">
              <label>CONTENT : </label>
            </div>
          </div>
          <div class="row mt-2">
            <div class="col-12">
              <textarea class="form-control" id="postContent" placeholder="Content : " rows="5"></textarea>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-12">
              <button class="btn btn-success" onclick="addPost()">CREATE POST</button>
            </div>
          </div>
      </div>
    </div>
      <div>
          <script>
              function addPost(){
                  const request = new XMLHttpRequest();
                  request.onreadystatechange = function () {
                      if(this.readyState === request.DONE && this.status === 200) {
                          window.location.href = "/news"
                      }
                  };
                  let requestBody = {"title": postTitle.value, "content" : postContent.value};
                  request.open("POST", "/api/post");
                  request.setRequestHeader("Content-Type","application/json;charset=UTF-8");
                  request.send(JSON.stringify(requestBody));
              }
          </script>
      </div>
      <!-- Footer-->
      <footer class="py-5 bg-dark" style="margin-top: 130px">
          <div class="container"><p class="m-0 text-center text-white">&copy; 2023 Incas e &copy; All Rights Reserved.</p></div>
      </footer>
  </div>
</html>
